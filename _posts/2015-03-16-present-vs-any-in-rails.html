---
layout: post
title: present? vs any? in Rails
date: '2015-03-16T16:32:00.000-07:00'
author: Mark J. Lehman
tags:
- rails
- ruby
modified_time: '2015-08-21T10:08:38.687-07:00'
blogger_id: tag:blogger.com,1999:blog-4459370175540830177.post-6094570210674296336
blogger_orig_url: http://spaghettirefactory.blogspot.com/2015/03/present-vs-any-in-rails.html
---

First, a few definitions, direct from the <a href="http://ruby-doc.org/core-2.1.0/Enumerable.html#method-i-any-3F">Ruby docs</a>&nbsp; and <a href="http://api.rubyonrails.org/classes/Object.html">Rails docs</a>:<br /><br /><code>present?</code><br />An object is present if it’s not blank?<br /><br /><code>blank?</code><br />An object is blank if it’s false, empty, or a whitespace string.<br /><br /><code>any?</code><br />Passes each element of the collection to the given block. The method returns true if the block ever returns a value other than false or nil. If the block is not given, Ruby adds an implicit block of { |obj| obj } that will cause any? to return true if at least one of the collection members is not false or nil.&nbsp; <br /><br /><code>present?</code> is a Rails method from ActiveSupport<br /><code>any?</code> is pure Ruby  A few important points:  <br /><pre><code><br />  nil.any? <br />  # =&gt; NoMethodError: undefined method `any?' for nil:NilClass<br /><br />  nil.present? <br />  # =&gt; false<br /><br />  [""].any? &amp;&amp; [""].present? <br />  # =&gt; true<br /><br />  [""].any? &amp;:present? <br />  # =&gt; false<br /></code></pre><br />The last example is good if you need to make sure there are no blank values in an array.<br /><br />&nbsp;So, how do all of these measure up, performance-wise? Well, they're all pretty similar, but it seems that <code>any?</code> is moderately faster than present, so if you can get away with it, go for that one. However, as far as I'm concerned, when dealing with such a small performance difference, readability becomes more important, so I would personally go for whichever is more readable that still accomplishes my purposes. With arrays, that tends to be <code>any?</code> most of the time.<br /><br />Benchmarks:  <br /><pre><code><br />  array = (0..500000).to_a<br />  Benchmark.bmbm do |x|<br />    x.report("any with empty array:")   { 100000.times { [].any? } }  <br />    x.report("present with empty array:") { 100000.times { [].present? } }  <br />    x.report("any with stuff:")   { 100000.times { array.any? } }  <br />    x.report("present with stuff:") { 100000.times { array.present? } }  <br />  end  <br /><br />                                  user     system      total        real<br />  any with empty array:       0.010000   0.000000   0.010000 (  0.010986)<br />  present with empty array:   0.010000   0.000000   0.010000 (  0.015146)<br />  any with stuff:             0.010000   0.000000   0.010000 (  0.008500)<br />  present with stuff:         0.010000   0.000000   0.010000 (  0.012448)<br /></code></pre>